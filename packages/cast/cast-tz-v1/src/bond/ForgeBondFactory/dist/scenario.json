[
 {
  "shortname": "Instrument",
  "longname": "Instrument",
  "scenario": [
   {
    "action": "newContract",
    "accept_unknown_types": false,
    "export": "(template_id (static_id 0 (\"py\" 12)) \nstorage (record (\"py\" 12) )\nstorage_type (())\nmessages ()\nflags ((exceptions VerifyOrLine))\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())",
    "id": "(static_id 0 (\"py\" 12))",
    "line_no": "(\"\" -1)",
    "show": true
   }
  ],
  "kind": "compilation"
 },
 {
  "shortname": "ForgeBond",
  "longname": "ForgeBond",
  "scenario": [
   {
    "action": "newContract",
    "accept_unknown_types": false,
    "export": "(template_id (static_id 2 (\"py\" 28)) \nstorage ()\nstorage_type ((record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (currency \"string\") (currentSupply \"nat\") (entrypointsBigMap (bigmap \"bytes\" \"bytes\")) (eventSinkContractAddress \"address\") (initialSupply \"nat\") (isinCode \"string\") (name \"string\") (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (symbol \"string\")) None))\nmessages ((confirmPaymentReceived True None None True (\"py\" 162) ((verify (eq (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 165)) \"status\" (\"py\" 165)) (literal (nat 2) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/settlementStatus.py\" 4)) (\"py\" 165)) (literal (string \"subscription ticket not locked\") (\"py\" 164)) (\"py\" 164)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 176) (balances (attr (data) \"balances\" (\"py\" 182))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (owner (attr (data) \"owner\" (\"py\" 179))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165))) (txId (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)))) (\"py\" 176)) \"newSettlementTransactionRepository\" (\"py\" 185)) (\"py\" 185)) (set (attr (data) \"balances\" (\"py\" 182)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 176) (balances (attr (data) \"balances\" (\"py\" 182))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (owner (attr (data) \"owner\" (\"py\" 179))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165))) (txId (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)))) (\"py\" 176)) \"newBalances\" (\"py\" 186)) (\"py\" 186)) (set_type (record (\"py\" 93) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliverySenderAccountNumber\" (\"py\" 94))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryReceiverAccountNumber\" (\"py\" 95))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryQuantity\" (\"py\" 96)))) (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (\"py\" 99)) (verify (isVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 101)) \"Some\" (\"py\" 106)) (literal (string \"Bad event sink contract address\") (\"py\" 106)) (\"py\" 106)) (set (operations (\"py\" 108)) (cons (transfer (record (\"py\" 93) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliverySenderAccountNumber\" (\"py\" 94))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryReceiverAccountNumber\" (\"py\" 95))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryQuantity\" (\"py\" 96)))) (literal (mutez 0) (\"py\" 110)) (openVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 101)) \"Some\" \"None\" (\"py\" 111)) (\"py\" 108)) (operations (\"py\" 108)) (\"py\" 108)) (\"py\" 108)) (verify (isVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" (\"py\" 65)) (literal (string \"Bad event sink contract address\") (\"py\" 65)) (\"py\" 65)) (set (operations (\"py\" 67)) (cons (transfer (record (\"py\" 68) (settlementId (attr (params (\"py\" 162)) \"txId\" (\"py\" 166))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 72)) (openVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" \"None\" (\"py\" 73)) (\"py\" 67)) (operations (\"py\" 67)) (\"py\" 67)) (\"py\" 67)))) (confirmPaymentTransferred True None None True (\"py\" 199) ((set (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callConfirmPaymentTransferred\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 207) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (owner (attr (data) \"owner\" (\"py\" 179))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165))) (txId (attr (params (\"py\" 199)) \"txId\" (\"py\" 208)))) (\"py\" 207)) (\"py\" 215)) (verify (isVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" (\"py\" 65)) (literal (string \"Bad event sink contract address\") (\"py\" 65)) (\"py\" 65)) (set (operations (\"py\" 67)) (cons (transfer (record (\"py\" 68) (settlementId (attr (params (\"py\" 199)) \"txId\" (\"py\" 208))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 72)) (openVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" \"None\" (\"py\" 73)) (\"py\" 67)) (operations (\"py\" 67)) (\"py\" 67)) (\"py\" 67)))) (initiateSubscription True None None True (\"py\" 120) ((set_type (params (\"py\" 120)) (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) (Some ((\"txId\") ((\"operationId\") ((\"deliverySenderAccountNumber\") ((\"deliveryReceiverAccountNumber\") ((\"deliveryQuantity\") (\"txHash\")))))))) (\"py\" 121)) (verify (not (contains (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 120)) \"txId\" (\"py\" 130)) (\"py\" 129)) (\"py\" 129)) (literal (string \"settlementTransactionId already used\") (\"py\" 129)) (\"py\" 129)) (verify (eq (pack (type_annotation (attr (data) \"owner\" (\"py\" 179)) (unknown 2) (\"py\" 132)) (\"py\" 132)) (pack (type_annotation (attr (params (\"py\" 120)) \"deliverySenderAccountNumber\" (\"py\" 132)) (unknown 2) (\"py\" 132)) (\"py\" 132)) (\"py\" 132)) (literal (string \"deliverySenderAccountNumber must match token owner\") (\"py\" 132)) (\"py\" 132)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 143) (balances (attr (data) \"balances\" (\"py\" 182))) (newSettlementTransaction (record (\"py\" 134) (deliveryQuantity (attr (params (\"py\" 120)) \"deliveryQuantity\" (\"py\" 139))) (deliveryReceiverAccountNumber (attr (params (\"py\" 120)) \"deliveryReceiverAccountNumber\" (\"py\" 138))) (deliverySenderAccountNumber (attr (params (\"py\" 120)) \"deliverySenderAccountNumber\" (\"py\" 132))) (operationId (attr (params (\"py\" 120)) \"operationId\" (\"py\" 136))) (txHash (attr (params (\"py\" 120)) \"txHash\" (\"py\" 140))) (txId (attr (params (\"py\" 120)) \"txId\" (\"py\" 130))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165)))) (\"py\" 143)) \"newSettlementRepository\" (\"py\" 151)) (\"py\" 151)) (set (attr (data) \"balances\" (\"py\" 182)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 143) (balances (attr (data) \"balances\" (\"py\" 182))) (newSettlementTransaction (record (\"py\" 134) (deliveryQuantity (attr (params (\"py\" 120)) \"deliveryQuantity\" (\"py\" 139))) (deliveryReceiverAccountNumber (attr (params (\"py\" 120)) \"deliveryReceiverAccountNumber\" (\"py\" 138))) (deliverySenderAccountNumber (attr (params (\"py\" 120)) \"deliverySenderAccountNumber\" (\"py\" 132))) (operationId (attr (params (\"py\" 120)) \"operationId\" (\"py\" 136))) (txHash (attr (params (\"py\" 120)) \"txHash\" (\"py\" 140))) (txId (attr (params (\"py\" 120)) \"txId\" (\"py\" 130))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165)))) (\"py\" 143)) \"newBalances\" (\"py\" 152)) (\"py\" 152)) (verify (isVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 43)) \"Some\" (\"py\" 48)) (literal (string \"Bad event sink contract address\") (\"py\" 48)) (\"py\" 48)) (set (operations (\"py\" 50)) (cons (transfer (record (\"py\" 51) (settlementId (attr (params (\"py\" 120)) \"txId\" (\"py\" 130)))) (literal (mutez 0) (\"py\" 54)) (openVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 43)) \"Some\" \"None\" (\"py\" 55)) (\"py\" 50)) (operations (\"py\" 50)) (\"py\" 50)) (\"py\" 50)))) (run True None None True (\"py\" 226) ((set_type (params (\"py\" 226)) (record ((_operator \"address\") (_operatorRole \"nat\") (entrypointName \"string\")) None) (\"py\" 227)) (set (attr (data) \"operatorsAuthorizations\" (\"py\" 180)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (attr (params (\"py\" 226)) \"entrypointName\" (\"py\" 232)) (\"py\" 231)) (\"py\" 231)) (lambda (record ((_operator \"address\") (_operatorRole \"nat\") (_operatorsAuthorizations (map \"address\" (set \"nat\"))) (_owner \"address\") (_sender \"address\")) None) (map \"address\" (set \"nat\"))) (\"py\" 234)) \"Some\" \"None\" (\"py\" 255)) (record (\"py\" 247) (_operator (attr (params (\"py\" 226)) \"_operator\" (\"py\" 251))) (_operatorRole (attr (params (\"py\" 226)) \"_operatorRole\" (\"py\" 252))) (_operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (_owner (attr (data) \"owner\" (\"py\" 179))) (_sender (sender))) (\"py\" 255)) (\"py\" 257)) (ifBlock (eq (attr (params (\"py\" 226)) \"entrypointName\" (\"py\" 232)) (literal (string \"callAuthorizeOperator\") (\"py\" 261)) (\"py\" 261)) ((verify (isVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" (\"py\" 82)) (literal (string \"Bad event sink contract address\") (\"py\" 82)) (\"py\" 82)) (set (operations (\"py\" 84)) (cons (transfer (record (\"py\" 85) (by (sender)) (operator (attr (params (\"py\" 226)) \"_operator\" (\"py\" 251))) (operatorRole (attr (params (\"py\" 226)) \"_operatorRole\" (\"py\" 252)))) (literal (mutez 0) (\"py\" 87)) (openVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" \"None\" (\"py\" 88)) (\"py\" 84)) (operations (\"py\" 84)) (\"py\" 84)) (\"py\" 84))) (\"py\" 261)) (ifBlock (eq (attr (params (\"py\" 226)) \"entrypointName\" (\"py\" 232)) (literal (string \"callRevokeOperatorAuthorization\") (\"py\" 264)) (\"py\" 264)) ((verify (isVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" (\"py\" 82)) (literal (string \"Bad event sink contract address\") (\"py\" 82)) (\"py\" 82)) (set (operations (\"py\" 84)) (cons (transfer (record (\"py\" 85) (by (sender)) (operator (attr (params (\"py\" 226)) \"_operator\" (\"py\" 251))) (operatorRole (attr (params (\"py\" 226)) \"_operatorRole\" (\"py\" 252)))) (literal (mutez 0) (\"py\" 87)) (openVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" \"None\" (\"py\" 88)) (\"py\" 84)) (operations (\"py\" 84)) (\"py\" 84)) (\"py\" 84))) (\"py\" 264)))) (upgrade True None None True (\"py\" 33) ((verify (or (eq (sender) (attr (data) \"owner\" (\"py\" 179)) (\"py\" 35)) (eq (source) (attr (data) \"owner\" (\"py\" 179)) (\"py\" 36)) (\"py\" 35)) (literal (string \"only owner can upgrade\") (\"py\" 35)) (\"py\" 35)) (forGroup \"x\" (items (params (\"py\" 33)) (\"py\" 38)) ((set (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (attr (iter \"x\" (\"py\" 38)) \"key\" (\"py\" 39)) (\"py\" 39)) (attr (iter \"x\" (\"py\" 38)) \"value\" (\"py\" 39)) (\"py\" 39))) (\"py\" 38)))))\nflags ((exceptions VerifyOrLine))\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())",
    "id": "(static_id 2 (\"py\" 28))",
    "line_no": "(\"\" -1)",
    "show": true
   }
  ],
  "kind": "compilation"
 },
 {
  "shortname": "ForgeBondFactory",
  "longname": "ForgeBondFactory",
  "scenario": [
   {
    "action": "newContract",
    "accept_unknown_types": false,
    "export": "(template_id (static_id 5 (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 20)) \nstorage (record (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 20) (admin (literal (address \"tz1@ADMIN@\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 176))) (entrypointsBigMap (type_annotation (big_map (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 22) ) (bigmap \"bytes\" \"bytes\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 22))) (eventSinkContractAddress (literal (address \"tz1@SINK@\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 177))) (registrarAddress (literal (address \"tz1@REGISTRAR@\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 178))))\nstorage_type (())\nmessages ((createForgeBond True None None True (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107) ((set_type (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) (record ((callable \"bool\") (couponFrequencyInMonths \"nat\") (currency \"string\") (denomination \"nat\") (divisor \"nat\") (firstCouponDate \"nat\") (initialMaturityDate \"nat\") (initialSupply \"nat\") (interestRateInBips \"nat\") (isSoftBullet \"bool\") (isinCode \"string\") (name \"string\") (owner \"address\") (registrar \"address\") (registryAddress \"address\") (settler \"address\") (softBulletPeriodInMonths \"nat\") (startDate \"nat\") (symbol \"string\")) (Some ((\"registryAddress\") ((\"initialSupply\") ((\"isinCode\") ((\"name\") ((\"symbol\") ((\"denomination\") ((\"divisor\") ((\"startDate\") ((\"initialMaturityDate\") ((\"firstCouponDate\") ((\"couponFrequencyInMonths\") ((\"interestRateInBips\") ((\"callable\") ((\"isSoftBullet\") ((\"softBulletPeriodInMonths\") ((\"currency\") ((\"registrar\") ((\"settler\") (\"owner\"))))))))))))))))))))) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 109)) (verify (eq (sender) (attr (data) \"registrarAddress\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 103)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 103)) (literal (string \"Calling address should match factory registrar agent\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 103)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 103)) (verify (eq (sender) (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"registrar\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 148)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 148)) (literal (string \"Calling address should match bond registrar agent\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 148)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 148)) (defineLocal \"create_contract_ForgeBondFactory_contract_37\" (create_contract (contract (template_id (static_id 4 (\"py\" 28)) \nstorage ()\nstorage_type ((record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (currency \"string\") (currentSupply \"nat\") (entrypointsBigMap (bigmap \"bytes\" \"bytes\")) (eventSinkContractAddress \"address\") (initialSupply \"nat\") (isinCode \"string\") (name \"string\") (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (symbol \"string\")) None))\nmessages ((confirmPaymentReceived True None None True (\"py\" 162) ((verify (eq (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 165)) \"status\" (\"py\" 165)) (literal (nat 2) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/settlementStatus.py\" 4)) (\"py\" 165)) (literal (string \"subscription ticket not locked\") (\"py\" 164)) (\"py\" 164)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 176) (balances (attr (data) \"balances\" (\"py\" 182))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (owner (attr (data) \"owner\" (\"py\" 179))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165))) (txId (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)))) (\"py\" 176)) \"newSettlementTransactionRepository\" (\"py\" 185)) (\"py\" 185)) (set (attr (data) \"balances\" (\"py\" 182)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 176) (balances (attr (data) \"balances\" (\"py\" 182))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (owner (attr (data) \"owner\" (\"py\" 179))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165))) (txId (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)))) (\"py\" 176)) \"newBalances\" (\"py\" 186)) (\"py\" 186)) (set_type (record (\"py\" 93) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliverySenderAccountNumber\" (\"py\" 94))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryReceiverAccountNumber\" (\"py\" 95))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryQuantity\" (\"py\" 96)))) (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (\"py\" 99)) (verify (isVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 101)) \"Some\" (\"py\" 106)) (literal (string \"Bad event sink contract address\") (\"py\" 106)) (\"py\" 106)) (set (operations (\"py\" 108)) (cons (transfer (record (\"py\" 93) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliverySenderAccountNumber\" (\"py\" 94))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryReceiverAccountNumber\" (\"py\" 95))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 162)) \"txId\" (\"py\" 166)) (\"py\" 91)) \"deliveryQuantity\" (\"py\" 96)))) (literal (mutez 0) (\"py\" 110)) (openVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 101)) \"Some\" \"None\" (\"py\" 111)) (\"py\" 108)) (operations (\"py\" 108)) (\"py\" 108)) (\"py\" 108)) (verify (isVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" (\"py\" 65)) (literal (string \"Bad event sink contract address\") (\"py\" 65)) (\"py\" 65)) (set (operations (\"py\" 67)) (cons (transfer (record (\"py\" 68) (settlementId (attr (params (\"py\" 162)) \"txId\" (\"py\" 166))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 72)) (openVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" \"None\" (\"py\" 73)) (\"py\" 67)) (operations (\"py\" 67)) (\"py\" 67)) (\"py\" 67)))) (confirmPaymentTransferred True None None True (\"py\" 199) ((set (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callConfirmPaymentTransferred\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 207) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (owner (attr (data) \"owner\" (\"py\" 179))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165))) (txId (attr (params (\"py\" 199)) \"txId\" (\"py\" 208)))) (\"py\" 207)) (\"py\" 215)) (verify (isVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" (\"py\" 65)) (literal (string \"Bad event sink contract address\") (\"py\" 65)) (\"py\" 65)) (set (operations (\"py\" 67)) (cons (transfer (record (\"py\" 68) (settlementId (attr (params (\"py\" 199)) \"txId\" (\"py\" 208))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 72)) (openVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 60)) \"Some\" \"None\" (\"py\" 73)) (\"py\" 67)) (operations (\"py\" 67)) (\"py\" 67)) (\"py\" 67)))) (initiateSubscription True None None True (\"py\" 120) ((set_type (params (\"py\" 120)) (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) (Some ((\"txId\") ((\"operationId\") ((\"deliverySenderAccountNumber\") ((\"deliveryReceiverAccountNumber\") ((\"deliveryQuantity\") (\"txHash\")))))))) (\"py\" 121)) (verify (not (contains (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) \"settlementTransactionById\" (\"py\" 165)) (attr (params (\"py\" 120)) \"txId\" (\"py\" 130)) (\"py\" 129)) (\"py\" 129)) (literal (string \"settlementTransactionId already used\") (\"py\" 129)) (\"py\" 129)) (verify (eq (pack (type_annotation (attr (data) \"owner\" (\"py\" 179)) (unknown 4) (\"py\" 132)) (\"py\" 132)) (pack (type_annotation (attr (params (\"py\" 120)) \"deliverySenderAccountNumber\" (\"py\" 132)) (unknown 4) (\"py\" 132)) (\"py\" 132)) (\"py\" 132)) (literal (string \"deliverySenderAccountNumber must match token owner\") (\"py\" 132)) (\"py\" 132)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 165)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 143) (balances (attr (data) \"balances\" (\"py\" 182))) (newSettlementTransaction (record (\"py\" 134) (deliveryQuantity (attr (params (\"py\" 120)) \"deliveryQuantity\" (\"py\" 139))) (deliveryReceiverAccountNumber (attr (params (\"py\" 120)) \"deliveryReceiverAccountNumber\" (\"py\" 138))) (deliverySenderAccountNumber (attr (params (\"py\" 120)) \"deliverySenderAccountNumber\" (\"py\" 132))) (operationId (attr (params (\"py\" 120)) \"operationId\" (\"py\" 136))) (txHash (attr (params (\"py\" 120)) \"txHash\" (\"py\" 140))) (txId (attr (params (\"py\" 120)) \"txId\" (\"py\" 130))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165)))) (\"py\" 143)) \"newSettlementRepository\" (\"py\" 151)) (\"py\" 151)) (set (attr (data) \"balances\" (\"py\" 182)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 143) (balances (attr (data) \"balances\" (\"py\" 182))) (newSettlementTransaction (record (\"py\" 134) (deliveryQuantity (attr (params (\"py\" 120)) \"deliveryQuantity\" (\"py\" 139))) (deliveryReceiverAccountNumber (attr (params (\"py\" 120)) \"deliveryReceiverAccountNumber\" (\"py\" 138))) (deliverySenderAccountNumber (attr (params (\"py\" 120)) \"deliverySenderAccountNumber\" (\"py\" 132))) (operationId (attr (params (\"py\" 120)) \"operationId\" (\"py\" 136))) (txHash (attr (params (\"py\" 120)) \"txHash\" (\"py\" 140))) (txId (attr (params (\"py\" 120)) \"txId\" (\"py\" 130))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 165)))) (\"py\" 143)) \"newBalances\" (\"py\" 152)) (\"py\" 152)) (verify (isVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 43)) \"Some\" (\"py\" 48)) (literal (string \"Bad event sink contract address\") (\"py\" 48)) (\"py\" 48)) (set (operations (\"py\" 50)) (cons (transfer (record (\"py\" 51) (settlementId (attr (params (\"py\" 120)) \"txId\" (\"py\" 130)))) (literal (mutez 0) (\"py\" 54)) (openVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 43)) \"Some\" \"None\" (\"py\" 55)) (\"py\" 50)) (operations (\"py\" 50)) (\"py\" 50)) (\"py\" 50)))) (run True None None True (\"py\" 226) ((set_type (params (\"py\" 226)) (record ((_operator \"address\") (_operatorRole \"nat\") (entrypointName \"string\")) None) (\"py\" 227)) (set (attr (data) \"operatorsAuthorizations\" (\"py\" 180)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (pack (attr (params (\"py\" 226)) \"entrypointName\" (\"py\" 232)) (\"py\" 231)) (\"py\" 231)) (lambda (record ((_operator \"address\") (_operatorRole \"nat\") (_operatorsAuthorizations (map \"address\" (set \"nat\"))) (_owner \"address\") (_sender \"address\")) None) (map \"address\" (set \"nat\"))) (\"py\" 234)) \"Some\" \"None\" (\"py\" 255)) (record (\"py\" 247) (_operator (attr (params (\"py\" 226)) \"_operator\" (\"py\" 251))) (_operatorRole (attr (params (\"py\" 226)) \"_operatorRole\" (\"py\" 252))) (_operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 180))) (_owner (attr (data) \"owner\" (\"py\" 179))) (_sender (sender))) (\"py\" 255)) (\"py\" 257)) (ifBlock (eq (attr (params (\"py\" 226)) \"entrypointName\" (\"py\" 232)) (literal (string \"callAuthorizeOperator\") (\"py\" 261)) (\"py\" 261)) ((verify (isVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" (\"py\" 82)) (literal (string \"Bad event sink contract address\") (\"py\" 82)) (\"py\" 82)) (set (operations (\"py\" 84)) (cons (transfer (record (\"py\" 85) (by (sender)) (operator (attr (params (\"py\" 226)) \"_operator\" (\"py\" 251))) (operatorRole (attr (params (\"py\" 226)) \"_operatorRole\" (\"py\" 252)))) (literal (mutez 0) (\"py\" 87)) (openVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" \"None\" (\"py\" 88)) (\"py\" 84)) (operations (\"py\" 84)) (\"py\" 84)) (\"py\" 84))) (\"py\" 261)) (ifBlock (eq (attr (params (\"py\" 226)) \"entrypointName\" (\"py\" 232)) (literal (string \"callRevokeOperatorAuthorization\") (\"py\" 264)) (\"py\" 264)) ((verify (isVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" (\"py\" 82)) (literal (string \"Bad event sink contract address\") (\"py\" 82)) (\"py\" 82)) (set (operations (\"py\" 84)) (cons (transfer (record (\"py\" 85) (by (sender)) (operator (attr (params (\"py\" 226)) \"_operator\" (\"py\" 251))) (operatorRole (attr (params (\"py\" 226)) \"_operatorRole\" (\"py\" 252)))) (literal (mutez 0) (\"py\" 87)) (openVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 103)) (\"py\" 77)) \"Some\" \"None\" (\"py\" 88)) (\"py\" 84)) (operations (\"py\" 84)) (\"py\" 84)) (\"py\" 84))) (\"py\" 264)))) (upgrade True None None True (\"py\" 33) ((verify (or (eq (sender) (attr (data) \"owner\" (\"py\" 179)) (\"py\" 35)) (eq (source) (attr (data) \"owner\" (\"py\" 179)) (\"py\" 36)) (\"py\" 35)) (literal (string \"only owner can upgrade\") (\"py\" 35)) (\"py\" 35)) (forGroup \"x\" (items (params (\"py\" 33)) (\"py\" 38)) ((set (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 171)) (attr (iter \"x\" (\"py\" 38)) \"key\" (\"py\" 39)) (\"py\" 39)) (attr (iter \"x\" (\"py\" 38)) \"value\" (\"py\" 39)) (\"py\" 39))) (\"py\" 38)))))\nflags ((exceptions VerifyOrLine))\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())) (storage (record (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 38) (balances (map (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 31) ((attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"owner\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 155)) (record (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 32) (balance (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"initialSupply\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 156))) (locked (literal (nat 0) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 32))))))) (currency (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"currency\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 160))) (currentSupply (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"initialSupply\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 156))) (entrypointsBigMap (attr (data) \"entrypointsBigMap\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 49))) (eventSinkContractAddress (attr (data) \"eventSinkContractAddress\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 57))) (initialSupply (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"initialSupply\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 156))) (isinCode (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"isinCode\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 157))) (name (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"name\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 158))) (operatorsAuthorizations (map (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 45) ((attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"registrar\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 148)) (set (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 46) (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/roles.py\" 3)))) ((attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"settler\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 161)) (set (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 47) (literal (nat 2) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/roles.py\" 4)))))) (owner (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"owner\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 155))) (settlementTransactionRepository (record (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 39) (operationTypeByOperationId (type_annotation (map (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 42) ) (map \"nat\" \"nat\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 42))) (settlementTransactionById (type_annotation (map (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 40) ) (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 40))))) (symbol (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"symbol\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 159))))) (baker None) (amount (literal (mutez 0) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 5))) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) (set (operations (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) (cons (attr (getLocal \"create_contract_ForgeBondFactory_contract_37\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) \"operation\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) (operations (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) (set_type (attr (getLocal \"create_contract_ForgeBondFactory_contract_37\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) \"address\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) \"address\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 63)) (verify (isVariant (contract \"listInstrument\" (record ((address \"address\") (isin \"string\") (name \"string\")) None) (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"registryAddress\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 154)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 88)) \"Some\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 97)) (literal (string \"Bad instrument registry address\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 97)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 97)) (set (operations (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 100)) (cons (transfer (record (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 65) (address (attr (getLocal \"create_contract_ForgeBondFactory_contract_37\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37)) \"address\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 37))) (isin (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"isinCode\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 157))) (name (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"name\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 158)))) (literal (mutez 0) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 100)) (openVariant (contract \"listInstrument\" (record ((address \"address\") (isin \"string\") (name \"string\")) None) (attr (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 107)) \"registryAddress\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 154)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 88)) \"Some\" \"None\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 98)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 100)) (operations (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 100)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 100)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 100)))) (upgrade True None None True (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 166) ((set_type (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 166)) (map \"bytes\" \"bytes\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 167)) (verify (or (eq (sender) (attr (data) \"admin\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 169)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 169)) (eq (source) (attr (data) \"admin\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 169)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 170)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 169)) (literal (string \"only admin can upgrade\") (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 169)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 169)) (forGroup \"x\" (items (params (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 166)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 172)) ((set (getItem (attr (data) \"entrypointsBigMap\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 49)) (attr (iter \"x\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 172)) \"key\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 173)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 173)) (attr (iter \"x\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 172)) \"value\" (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 173)) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 173))) (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 172)))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())",
    "id": "(static_id 5 (\"src/bond/ForgeBondFactory/ForgeBondFactory_contract.py\" 20))",
    "line_no": "(\"\" -1)",
    "show": true
   }
  ],
  "kind": "compilation"
 }
]