[
 {
  "shortname": "ForgeEmtn",
  "longname": "ForgeEmtn",
  "scenario": [
   {
    "action": "newContract",
    "accept_unknown_types": false,
    "export": "(template_id (static_id 0 (\"py\" 24)) \nstorage ()\nstorage_type ((record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (currency \"string\") (currentSupply \"nat\") (entrypointsBigMap (bigmap \"bytes\" \"bytes\")) (eventSinkContractAddress \"address\") (initialSupply \"nat\") (isinCode \"string\") (name \"string\") (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (symbol \"string\")) None))\nmessages ((confirmPaymentReceived True None None True (\"py\" 157) ((verify (eq (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 160)) \"status\" (\"py\" 160)) (literal (nat 2) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/settlementStatus.py\" 4)) (\"py\" 160)) (literal (string \"subscription ticket not locked\") (\"py\" 159)) (\"py\" 159)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 171) (balances (attr (data) \"balances\" (\"py\" 177))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (owner (attr (data) \"owner\" (\"py\" 174))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160))) (txId (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)))) (\"py\" 171)) \"newSettlementTransactionRepository\" (\"py\" 180)) (\"py\" 180)) (set (attr (data) \"balances\" (\"py\" 177)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 171) (balances (attr (data) \"balances\" (\"py\" 177))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (owner (attr (data) \"owner\" (\"py\" 174))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160))) (txId (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)))) (\"py\" 171)) \"newBalances\" (\"py\" 181)) (\"py\" 181)) (set_type (record (\"py\" 88) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliverySenderAccountNumber\" (\"py\" 89))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryReceiverAccountNumber\" (\"py\" 90))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryQuantity\" (\"py\" 91)))) (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (\"py\" 94)) (verify (isVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 96)) \"Some\" (\"py\" 101)) (literal (string \"Bad event sink contract address\") (\"py\" 101)) (\"py\" 101)) (set (operations (\"py\" 103)) (cons (transfer (record (\"py\" 88) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliverySenderAccountNumber\" (\"py\" 89))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryReceiverAccountNumber\" (\"py\" 90))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryQuantity\" (\"py\" 91)))) (literal (mutez 0) (\"py\" 105)) (openVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 96)) \"Some\" \"None\" (\"py\" 106)) (\"py\" 103)) (operations (\"py\" 103)) (\"py\" 103)) (\"py\" 103)) (verify (isVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" (\"py\" 60)) (literal (string \"Bad event sink contract address\") (\"py\" 60)) (\"py\" 60)) (set (operations (\"py\" 62)) (cons (transfer (record (\"py\" 63) (settlementId (attr (params (\"py\" 157)) \"txId\" (\"py\" 161))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 67)) (openVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" \"None\" (\"py\" 68)) (\"py\" 62)) (operations (\"py\" 62)) (\"py\" 62)) (\"py\" 62)))) (confirmPaymentTransferred True None None True (\"py\" 194) ((set (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callConfirmPaymentTransferred\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 202) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (owner (attr (data) \"owner\" (\"py\" 174))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160))) (txId (attr (params (\"py\" 194)) \"txId\" (\"py\" 203)))) (\"py\" 202)) (\"py\" 210)) (verify (isVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" (\"py\" 60)) (literal (string \"Bad event sink contract address\") (\"py\" 60)) (\"py\" 60)) (set (operations (\"py\" 62)) (cons (transfer (record (\"py\" 63) (settlementId (attr (params (\"py\" 194)) \"txId\" (\"py\" 203))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 67)) (openVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" \"None\" (\"py\" 68)) (\"py\" 62)) (operations (\"py\" 62)) (\"py\" 62)) (\"py\" 62)))) (initiateSubscription True None None True (\"py\" 115) ((set_type (params (\"py\" 115)) (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) (Some ((\"txId\") ((\"operationId\") ((\"deliverySenderAccountNumber\") ((\"deliveryReceiverAccountNumber\") ((\"deliveryQuantity\") (\"txHash\")))))))) (\"py\" 116)) (verify (not (contains (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 115)) \"txId\" (\"py\" 125)) (\"py\" 124)) (\"py\" 124)) (literal (string \"settlementTransactionId already used\") (\"py\" 124)) (\"py\" 124)) (verify (eq (pack (type_annotation (attr (data) \"owner\" (\"py\" 174)) (unknown 2) (\"py\" 127)) (\"py\" 127)) (pack (type_annotation (attr (params (\"py\" 115)) \"deliverySenderAccountNumber\" (\"py\" 127)) (unknown 2) (\"py\" 127)) (\"py\" 127)) (\"py\" 127)) (literal (string \"deliverySenderAccountNumber must match token owner\") (\"py\" 127)) (\"py\" 127)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 138) (balances (attr (data) \"balances\" (\"py\" 177))) (newSettlementTransaction (record (\"py\" 129) (deliveryQuantity (attr (params (\"py\" 115)) \"deliveryQuantity\" (\"py\" 134))) (deliveryReceiverAccountNumber (attr (params (\"py\" 115)) \"deliveryReceiverAccountNumber\" (\"py\" 133))) (deliverySenderAccountNumber (attr (params (\"py\" 115)) \"deliverySenderAccountNumber\" (\"py\" 127))) (operationId (attr (params (\"py\" 115)) \"operationId\" (\"py\" 131))) (txHash (attr (params (\"py\" 115)) \"txHash\" (\"py\" 135))) (txId (attr (params (\"py\" 115)) \"txId\" (\"py\" 125))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160)))) (\"py\" 138)) \"newSettlementRepository\" (\"py\" 146)) (\"py\" 146)) (set (attr (data) \"balances\" (\"py\" 177)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 138) (balances (attr (data) \"balances\" (\"py\" 177))) (newSettlementTransaction (record (\"py\" 129) (deliveryQuantity (attr (params (\"py\" 115)) \"deliveryQuantity\" (\"py\" 134))) (deliveryReceiverAccountNumber (attr (params (\"py\" 115)) \"deliveryReceiverAccountNumber\" (\"py\" 133))) (deliverySenderAccountNumber (attr (params (\"py\" 115)) \"deliverySenderAccountNumber\" (\"py\" 127))) (operationId (attr (params (\"py\" 115)) \"operationId\" (\"py\" 131))) (txHash (attr (params (\"py\" 115)) \"txHash\" (\"py\" 135))) (txId (attr (params (\"py\" 115)) \"txId\" (\"py\" 125))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160)))) (\"py\" 138)) \"newBalances\" (\"py\" 147)) (\"py\" 147)) (verify (isVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 38)) \"Some\" (\"py\" 43)) (literal (string \"Bad event sink contract address\") (\"py\" 43)) (\"py\" 43)) (set (operations (\"py\" 45)) (cons (transfer (record (\"py\" 46) (settlementId (attr (params (\"py\" 115)) \"txId\" (\"py\" 125)))) (literal (mutez 0) (\"py\" 49)) (openVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 38)) \"Some\" \"None\" (\"py\" 50)) (\"py\" 45)) (operations (\"py\" 45)) (\"py\" 45)) (\"py\" 45)))) (run True None None True (\"py\" 221) ((set_type (params (\"py\" 221)) (record ((_operator \"address\") (_operatorRole \"nat\") (entrypointName \"string\")) None) (\"py\" 222)) (set (attr (data) \"operatorsAuthorizations\" (\"py\" 175)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (attr (params (\"py\" 221)) \"entrypointName\" (\"py\" 227)) (\"py\" 226)) (\"py\" 226)) (lambda (record ((_operator \"address\") (_operatorRole \"nat\") (_operatorsAuthorizations (map \"address\" (set \"nat\"))) (_owner \"address\") (_sender \"address\")) None) (map \"address\" (set \"nat\"))) (\"py\" 229)) \"Some\" \"None\" (\"py\" 250)) (record (\"py\" 242) (_operator (attr (params (\"py\" 221)) \"_operator\" (\"py\" 246))) (_operatorRole (attr (params (\"py\" 221)) \"_operatorRole\" (\"py\" 247))) (_operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (_owner (attr (data) \"owner\" (\"py\" 174))) (_sender (sender))) (\"py\" 250)) (\"py\" 252)) (ifBlock (eq (attr (params (\"py\" 221)) \"entrypointName\" (\"py\" 227)) (literal (string \"callAuthorizeOperator\") (\"py\" 256)) (\"py\" 256)) ((verify (isVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" (\"py\" 77)) (literal (string \"Bad event sink contract address\") (\"py\" 77)) (\"py\" 77)) (set (operations (\"py\" 79)) (cons (transfer (record (\"py\" 80) (by (sender)) (operator (attr (params (\"py\" 221)) \"_operator\" (\"py\" 246))) (operatorRole (attr (params (\"py\" 221)) \"_operatorRole\" (\"py\" 247)))) (literal (mutez 0) (\"py\" 82)) (openVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" \"None\" (\"py\" 83)) (\"py\" 79)) (operations (\"py\" 79)) (\"py\" 79)) (\"py\" 79))) (\"py\" 256)) (ifBlock (eq (attr (params (\"py\" 221)) \"entrypointName\" (\"py\" 227)) (literal (string \"callRevokeOperatorAuthorization\") (\"py\" 259)) (\"py\" 259)) ((verify (isVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" (\"py\" 77)) (literal (string \"Bad event sink contract address\") (\"py\" 77)) (\"py\" 77)) (set (operations (\"py\" 79)) (cons (transfer (record (\"py\" 80) (by (sender)) (operator (attr (params (\"py\" 221)) \"_operator\" (\"py\" 246))) (operatorRole (attr (params (\"py\" 221)) \"_operatorRole\" (\"py\" 247)))) (literal (mutez 0) (\"py\" 82)) (openVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" \"None\" (\"py\" 83)) (\"py\" 79)) (operations (\"py\" 79)) (\"py\" 79)) (\"py\" 79))) (\"py\" 259)))) (upgrade True None None True (\"py\" 28) ((verify (or (eq (sender) (attr (data) \"owner\" (\"py\" 174)) (\"py\" 30)) (eq (source) (attr (data) \"owner\" (\"py\" 174)) (\"py\" 31)) (\"py\" 30)) (literal (string \"only owner can upgrade\") (\"py\" 30)) (\"py\" 30)) (forGroup \"x\" (items (params (\"py\" 28)) (\"py\" 33)) ((set (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (attr (iter \"x\" (\"py\" 33)) \"key\" (\"py\" 34)) (\"py\" 34)) (attr (iter \"x\" (\"py\" 33)) \"value\" (\"py\" 34)) (\"py\" 34))) (\"py\" 33)))))\nflags ((exceptions VerifyOrLine))\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())",
    "id": "(static_id 0 (\"py\" 24))",
    "line_no": "(\"\" -1)",
    "show": true
   }
  ],
  "kind": "compilation"
 },
 {
  "shortname": "ForgeEmtnFactory",
  "longname": "ForgeEmtnFactory",
  "scenario": [
   {
    "action": "newContract",
    "accept_unknown_types": false,
    "export": "(template_id (static_id 3 (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 20)) \nstorage (record (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 20) (admin (literal (address \"tz1@ADMIN@\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 136))) (entrypointsBigMap (type_annotation (big_map (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 22) ) (bigmap \"bytes\" \"bytes\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 22))) (eventSinkContractAddress (literal (address \"tz1@SINK@\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 136))) (registrarAddress (literal (address \"tz1@REGISTRAR@\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 136))))\nstorage_type (())\nmessages ((createForgeEmtn True None None True (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107) ((verify (eq (sender) (attr (data) \"registrarAddress\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 103)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 103)) (literal (string \"Calling address should match factory registrar agent\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 103)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 103)) (verify (eq (sender) (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"registrar\" (\"\" -1)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 109)) (literal (string \"Calling address should match emtn registrar agent\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 109)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 109)) (defineLocal \"create_contract_ForgeEmtnFactory_contract_37\" (create_contract (contract (template_id (static_id 2 (\"py\" 24)) \nstorage ()\nstorage_type ((record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (currency \"string\") (currentSupply \"nat\") (entrypointsBigMap (bigmap \"bytes\" \"bytes\")) (eventSinkContractAddress \"address\") (initialSupply \"nat\") (isinCode \"string\") (name \"string\") (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (symbol \"string\")) None))\nmessages ((confirmPaymentReceived True None None True (\"py\" 157) ((verify (eq (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 160)) \"status\" (\"py\" 160)) (literal (nat 2) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/settlementStatus.py\" 4)) (\"py\" 160)) (literal (string \"subscription ticket not locked\") (\"py\" 159)) (\"py\" 159)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 171) (balances (attr (data) \"balances\" (\"py\" 177))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (owner (attr (data) \"owner\" (\"py\" 174))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160))) (txId (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)))) (\"py\" 171)) \"newSettlementTransactionRepository\" (\"py\" 180)) (\"py\" 180)) (set (attr (data) \"balances\" (\"py\" 177)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callConfirmPaymentReceived\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 171) (balances (attr (data) \"balances\" (\"py\" 177))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (owner (attr (data) \"owner\" (\"py\" 174))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160))) (txId (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)))) (\"py\" 171)) \"newBalances\" (\"py\" 181)) (\"py\" 181)) (set_type (record (\"py\" 88) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliverySenderAccountNumber\" (\"py\" 89))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryReceiverAccountNumber\" (\"py\" 90))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryQuantity\" (\"py\" 91)))) (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (\"py\" 94)) (verify (isVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 96)) \"Some\" (\"py\" 101)) (literal (string \"Bad event sink contract address\") (\"py\" 101)) (\"py\" 101)) (set (operations (\"py\" 103)) (cons (transfer (record (\"py\" 88) (_from (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliverySenderAccountNumber\" (\"py\" 89))) (_to (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryReceiverAccountNumber\" (\"py\" 90))) (_value (attr (getItem (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 157)) \"txId\" (\"py\" 161)) (\"py\" 86)) \"deliveryQuantity\" (\"py\" 91)))) (literal (mutez 0) (\"py\" 105)) (openVariant (contract \"Transfer\" (record ((_from \"address\") (_to \"address\") (_value \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 96)) \"Some\" \"None\" (\"py\" 106)) (\"py\" 103)) (operations (\"py\" 103)) (\"py\" 103)) (\"py\" 103)) (verify (isVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" (\"py\" 60)) (literal (string \"Bad event sink contract address\") (\"py\" 60)) (\"py\" 60)) (set (operations (\"py\" 62)) (cons (transfer (record (\"py\" 63) (settlementId (attr (params (\"py\" 157)) \"txId\" (\"py\" 161))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 67)) (openVariant (contract \"PaymentReceived\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" \"None\" (\"py\" 68)) (\"py\" 62)) (operations (\"py\" 62)) (\"py\" 62)) (\"py\" 62)))) (confirmPaymentTransferred True None None True (\"py\" 194) ((set (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callConfirmPaymentTransferred\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((operatorsAuthorizations (map \"address\" (set \"nat\"))) (owner \"address\") (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (txId \"nat\")) None) (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 202) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (owner (attr (data) \"owner\" (\"py\" 174))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160))) (txId (attr (params (\"py\" 194)) \"txId\" (\"py\" 203)))) (\"py\" 202)) (\"py\" 210)) (verify (isVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" (\"py\" 60)) (literal (string \"Bad event sink contract address\") (\"py\" 60)) (\"py\" 60)) (set (operations (\"py\" 62)) (cons (transfer (record (\"py\" 63) (settlementId (attr (params (\"py\" 194)) \"txId\" (\"py\" 203))) (settlementTransactionOperationType (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/operations.py\" 3)))) (literal (mutez 0) (\"py\" 67)) (openVariant (contract \"PaymentTransferred\" (record ((settlementId \"nat\") (settlementTransactionOperationType \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 55)) \"Some\" \"None\" (\"py\" 68)) (\"py\" 62)) (operations (\"py\" 62)) (\"py\" 62)) (\"py\" 62)))) (initiateSubscription True None None True (\"py\" 115) ((set_type (params (\"py\" 115)) (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) (Some ((\"txId\") ((\"operationId\") ((\"deliverySenderAccountNumber\") ((\"deliveryReceiverAccountNumber\") ((\"deliveryQuantity\") (\"txHash\")))))))) (\"py\" 116)) (verify (not (contains (attr (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) \"settlementTransactionById\" (\"py\" 160)) (attr (params (\"py\" 115)) \"txId\" (\"py\" 125)) (\"py\" 124)) (\"py\" 124)) (literal (string \"settlementTransactionId already used\") (\"py\" 124)) (\"py\" 124)) (verify (eq (pack (type_annotation (attr (data) \"owner\" (\"py\" 174)) (unknown 4) (\"py\" 127)) (\"py\" 127)) (pack (type_annotation (attr (params (\"py\" 115)) \"deliverySenderAccountNumber\" (\"py\" 127)) (unknown 4) (\"py\" 127)) (\"py\" 127)) (\"py\" 127)) (literal (string \"deliverySenderAccountNumber must match token owner\") (\"py\" 127)) (\"py\" 127)) (set (attr (data) \"settlementTransactionRepository\" (\"py\" 160)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 138) (balances (attr (data) \"balances\" (\"py\" 177))) (newSettlementTransaction (record (\"py\" 129) (deliveryQuantity (attr (params (\"py\" 115)) \"deliveryQuantity\" (\"py\" 134))) (deliveryReceiverAccountNumber (attr (params (\"py\" 115)) \"deliveryReceiverAccountNumber\" (\"py\" 133))) (deliverySenderAccountNumber (attr (params (\"py\" 115)) \"deliverySenderAccountNumber\" (\"py\" 127))) (operationId (attr (params (\"py\" 115)) \"operationId\" (\"py\" 131))) (txHash (attr (params (\"py\" 115)) \"txHash\" (\"py\" 135))) (txId (attr (params (\"py\" 115)) \"txId\" (\"py\" 125))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160)))) (\"py\" 138)) \"newSettlementRepository\" (\"py\" 146)) (\"py\" 146)) (set (attr (data) \"balances\" (\"py\" 177)) (attr (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (literal (string \"callInitiateSubscription\") (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 25)) (lambda (record ((balances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementTransaction (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (txHash \"string\") (txId \"nat\")) None)) (operatorsAuthorizations (map \"address\" (set \"nat\"))) (sender \"address\") (settlementTransactionRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None) (record ((newBalances (map \"address\" (record ((balance \"nat\") (locked \"nat\")) None))) (newSettlementRepository (record ((operationTypeByOperationId (map \"nat\" \"nat\")) (settlementTransactionById (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)))) None))) None)) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 27)) \"Some\" \"None\" (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/globals.py\" 34)) (record (\"py\" 138) (balances (attr (data) \"balances\" (\"py\" 177))) (newSettlementTransaction (record (\"py\" 129) (deliveryQuantity (attr (params (\"py\" 115)) \"deliveryQuantity\" (\"py\" 134))) (deliveryReceiverAccountNumber (attr (params (\"py\" 115)) \"deliveryReceiverAccountNumber\" (\"py\" 133))) (deliverySenderAccountNumber (attr (params (\"py\" 115)) \"deliverySenderAccountNumber\" (\"py\" 127))) (operationId (attr (params (\"py\" 115)) \"operationId\" (\"py\" 131))) (txHash (attr (params (\"py\" 115)) \"txHash\" (\"py\" 135))) (txId (attr (params (\"py\" 115)) \"txId\" (\"py\" 125))))) (operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (sender (sender)) (settlementTransactionRepository (attr (data) \"settlementTransactionRepository\" (\"py\" 160)))) (\"py\" 138)) \"newBalances\" (\"py\" 147)) (\"py\" 147)) (verify (isVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 38)) \"Some\" (\"py\" 43)) (literal (string \"Bad event sink contract address\") (\"py\" 43)) (\"py\" 43)) (set (operations (\"py\" 45)) (cons (transfer (record (\"py\" 46) (settlementId (attr (params (\"py\" 115)) \"txId\" (\"py\" 125)))) (literal (mutez 0) (\"py\" 49)) (openVariant (contract \"SubscriptionInitiated\" (record ((settlementId \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 38)) \"Some\" \"None\" (\"py\" 50)) (\"py\" 45)) (operations (\"py\" 45)) (\"py\" 45)) (\"py\" 45)))) (run True None None True (\"py\" 221) ((set_type (params (\"py\" 221)) (record ((_operator \"address\") (_operatorRole \"nat\") (entrypointName \"string\")) None) (\"py\" 222)) (set (attr (data) \"operatorsAuthorizations\" (\"py\" 175)) (call_lambda (openVariant (unpack (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (pack (attr (params (\"py\" 221)) \"entrypointName\" (\"py\" 227)) (\"py\" 226)) (\"py\" 226)) (lambda (record ((_operator \"address\") (_operatorRole \"nat\") (_operatorsAuthorizations (map \"address\" (set \"nat\"))) (_owner \"address\") (_sender \"address\")) None) (map \"address\" (set \"nat\"))) (\"py\" 229)) \"Some\" \"None\" (\"py\" 250)) (record (\"py\" 242) (_operator (attr (params (\"py\" 221)) \"_operator\" (\"py\" 246))) (_operatorRole (attr (params (\"py\" 221)) \"_operatorRole\" (\"py\" 247))) (_operatorsAuthorizations (attr (data) \"operatorsAuthorizations\" (\"py\" 175))) (_owner (attr (data) \"owner\" (\"py\" 174))) (_sender (sender))) (\"py\" 250)) (\"py\" 252)) (ifBlock (eq (attr (params (\"py\" 221)) \"entrypointName\" (\"py\" 227)) (literal (string \"callAuthorizeOperator\") (\"py\" 256)) (\"py\" 256)) ((verify (isVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" (\"py\" 77)) (literal (string \"Bad event sink contract address\") (\"py\" 77)) (\"py\" 77)) (set (operations (\"py\" 79)) (cons (transfer (record (\"py\" 80) (by (sender)) (operator (attr (params (\"py\" 221)) \"_operator\" (\"py\" 246))) (operatorRole (attr (params (\"py\" 221)) \"_operatorRole\" (\"py\" 247)))) (literal (mutez 0) (\"py\" 82)) (openVariant (contract \"newOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" \"None\" (\"py\" 83)) (\"py\" 79)) (operations (\"py\" 79)) (\"py\" 79)) (\"py\" 79))) (\"py\" 256)) (ifBlock (eq (attr (params (\"py\" 221)) \"entrypointName\" (\"py\" 227)) (literal (string \"callRevokeOperatorAuthorization\") (\"py\" 259)) (\"py\" 259)) ((verify (isVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" (\"py\" 77)) (literal (string \"Bad event sink contract address\") (\"py\" 77)) (\"py\" 77)) (set (operations (\"py\" 79)) (cons (transfer (record (\"py\" 80) (by (sender)) (operator (attr (params (\"py\" 221)) \"_operator\" (\"py\" 246))) (operatorRole (attr (params (\"py\" 221)) \"_operatorRole\" (\"py\" 247)))) (literal (mutez 0) (\"py\" 82)) (openVariant (contract \"revokeOperator\" (record ((by \"address\") (operator \"address\") (operatorRole \"nat\")) None) (attr (data) \"eventSinkContractAddress\" (\"py\" 98)) (\"py\" 72)) \"Some\" \"None\" (\"py\" 83)) (\"py\" 79)) (operations (\"py\" 79)) (\"py\" 79)) (\"py\" 79))) (\"py\" 259)))) (upgrade True None None True (\"py\" 28) ((verify (or (eq (sender) (attr (data) \"owner\" (\"py\" 174)) (\"py\" 30)) (eq (source) (attr (data) \"owner\" (\"py\" 174)) (\"py\" 31)) (\"py\" 30)) (literal (string \"only owner can upgrade\") (\"py\" 30)) (\"py\" 30)) (forGroup \"x\" (items (params (\"py\" 28)) (\"py\" 33)) ((set (getItem (attr (data) \"entrypointsBigMap\" (\"py\" 166)) (attr (iter \"x\" (\"py\" 33)) \"key\" (\"py\" 34)) (\"py\" 34)) (attr (iter \"x\" (\"py\" 33)) \"value\" (\"py\" 34)) (\"py\" 34))) (\"py\" 33)))))\nflags ((exceptions VerifyOrLine))\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())) (storage (record (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 38) (balances (map (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 31) ((attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"owner\" (\"\" -1)) (record (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 32) (balance (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"initialSupply\" (\"\" -1))) (locked (literal (nat 0) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 32))))))) (currency (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"currency\" (\"\" -1))) (currentSupply (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"initialSupply\" (\"\" -1))) (entrypointsBigMap (attr (data) \"entrypointsBigMap\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 49))) (eventSinkContractAddress (attr (data) \"eventSinkContractAddress\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 57))) (initialSupply (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"initialSupply\" (\"\" -1))) (isinCode (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"isinCode\" (\"\" -1))) (name (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"name\" (\"\" -1))) (operatorsAuthorizations (map (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 45) ((attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"registrar\" (\"\" -1)) (set (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 46) (literal (nat 1) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/roles.py\" 3)))) ((attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"settler\" (\"\" -1)) (set (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 47) (literal (nat 2) (\"home/helder/Documents/cast1/packages/cast/cast-tz-v1/src/common/constants/roles.py\" 4)))))) (owner (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"owner\" (\"\" -1))) (settlementTransactionRepository (record (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 39) (operationTypeByOperationId (type_annotation (map (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 42) ) (map \"nat\" \"nat\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 42))) (settlementTransactionById (type_annotation (map (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 40) ) (map \"nat\" (record ((deliveryQuantity \"nat\") (deliveryReceiverAccountNumber \"address\") (deliverySenderAccountNumber \"address\") (operationId \"nat\") (status \"nat\") (txHash \"string\") (txId \"nat\")) None)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 40))))) (symbol (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"symbol\" (\"\" -1))))) (baker None) (amount (literal (mutez 0) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 5))) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) (set (operations (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) (cons (attr (getLocal \"create_contract_ForgeEmtnFactory_contract_37\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) \"operation\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) (operations (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) (set_type (attr (getLocal \"create_contract_ForgeEmtnFactory_contract_37\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) \"address\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) \"address\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 63)) (verify (isVariant (contract \"listInstrument\" (record ((address \"address\") (isin \"string\") (name \"string\")) None) (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"registryAddress\" (\"\" -1)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 88)) \"Some\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 97)) (literal (string \"Bad instrument registry address\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 97)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 97)) (set (operations (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 100)) (cons (transfer (record (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 65) (address (attr (getLocal \"create_contract_ForgeEmtnFactory_contract_37\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37)) \"address\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 37))) (isin (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"isinCode\" (\"\" -1))) (name (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"name\" (\"\" -1)))) (literal (mutez 0) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 100)) (openVariant (contract \"listInstrument\" (record ((address \"address\") (isin \"string\") (name \"string\")) None) (attr (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 107)) \"registryAddress\" (\"\" -1)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 88)) \"Some\" \"None\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 98)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 100)) (operations (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 100)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 100)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 100)))) (upgrade True None None True (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 127) ((set_type (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 127)) (map \"bytes\" \"bytes\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 128)) (verify (or (eq (sender) (attr (data) \"admin\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 130)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 130)) (eq (source) (attr (data) \"admin\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 130)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 131)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 130)) (literal (string \"only admin can upgrade\") (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 130)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 130)) (forGroup \"x\" (items (params (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 127)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 133)) ((set (getItem (attr (data) \"entrypointsBigMap\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 49)) (attr (iter \"x\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 133)) \"key\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 134)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 134)) (attr (iter \"x\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 133)) \"value\" (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 134)) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 134))) (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 133)))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())",
    "id": "(static_id 3 (\"src/emtn/ForgeEmtnFactory/ForgeEmtnFactory_contract.py\" 20))",
    "line_no": "(\"\" -1)",
    "show": true
   }
  ],
  "kind": "compilation"
 }
]